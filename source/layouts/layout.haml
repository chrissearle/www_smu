!!! 5
%html
  %head
    %meta{ :charset => 'utf-8' }
    %meta{ :'http-equiv' => 'X-UA-Compatible', :content => 'IE=edge;chrome=1' }
    %title= current_page.data.title || "Chris Searle"
    %meta{ :name => "viewport", :content => "width=device-width, initial-scale=1.0" }
    %link{ :href => "/stylesheets/bootstrap.css", :rel => "stylesheet", :media => "screen" }
    %link{ :href => "/stylesheets/custom.css", :rel => "stylesheet", :media => "screen" }
    %link{ :href => "/stylesheets/syntax.css", :rel => "stylesheet", :media => "screen" }
    %link{ :rel => "shortcut icon", :href => "/favicon.ico" }
    %link{ :rel => "alternate home", :type => "application/rss+xml", :href => url_for('/feed.xml') }
  %body
    .navbar
      .container
        %button.navbar-toggle{ :type => "button", :data => { :toggle => "collapse",  :target => ".navbar-responsive-collapse" } }
          %span.icon-bar
          %span.icon-bar
          %span.icon-bar
      
        %a.navbar-brand{ :href => "/" }
          Chris Searle
        
        .nav-collapse.collapse.navbar-responsive-collapse
          %ul.nav.navbar-nav
            %li
              %a{ :href => '/' }
                Home
            %li
              %a{ :href => '/tags/photo/' }
                Photo
            %li
              %a{ :href => '/tags/quadcopter/' }
                Quadcopter
            %li
              %a{ :href => '/tags/' }
                All Tags
            %li
              %a{ :href => '/articles/' }
                All Articles
          %ul.nav.navbar-nav.pull-right
            %li
              %a{ :target => '_blank', :href => "http://about.me/chrissearle/" }
                Other Sites

    .container
      .row
        .col-12.col-lg-9
          = yield
        .col-12.col-lg-3
        
          %form{ :action => "http://www.google.com", :id => "cse-search-box" }
            %div
              %input{ :type => 'hidden', :name => 'cx', :value => 'partner-pub-6208435820744910:5135878443' }
              %input{ :type => 'hidden', :name => 'ie', :size => 'UTF-8' }
              %input{ :type => 'text', :name => 'q', :size => '40' }
              %input{ :type => 'submit', :name => 'sa', :value => 'Search' }

          %script(src="http://www.google.com/coop/cse/brand?form=cse-search-box&amp;lang=en")
          
          %h2
            Popular Tags

          .list-group
            - blog.tags.sort_by{|k,v| v.size}.reverse[0...8].each do |tag, articles|
              %a.list-group-item{ :href => tag_path(tag) }
                %span.badge= articles.size
                = tag

          .centered
            %script(src="/javascripts/left-thin-as.js")
            %script(src="http://pagead2.googlesyndication.com/pagead/show_ads.js")

          %h2
            Recent Articles

          .list-group
            - blog.articles[0...10].each do |article|
              %a.list-group-item{ :href => url_for(article) }
                = article.title

          %h2
            By Year

          .list-group
            - blog.articles.group_by {|a| a.date.year }.each do |year, articles|
              %a.list-group-item{ :href => blog_year_path(year) }
                %span.badge= articles.size
                = year
                
    %footer.footer
      %script(src="/javascripts/footer-large-as.js")
      %script(src="http://pagead2.googlesyndication.com/pagead/show_ads.js")

    %script(src="http://code.jquery.com/jquery.js")
    %script(src="/javascripts/bootstrap.js")
    %script(src="/javascripts/ga.js")